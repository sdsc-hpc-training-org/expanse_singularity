<h3 id="import-a-prebuilt-docker-image">Import a Prebuilt Docker Image</h3>
<p>Importing a Docker or a Singularity prebuilt container requires resources that are limited on the login node, so first we need to get a terminal on a debug computing node. Find out the available projects:</p>
<pre><code>module load sdsc # should be already loaded
expanse-client user -r expanse</code></pre>
<p>copy-paste the more suitable “Project” into an environment variable:</p>
<pre><code>export PROJECT=xxx123</code></pre>
<p>Now we can request 30 minutes in the debug partition:</p>
<pre><code>srun --partition=debug --pty --account=$PROJECT --nodes=1 --ntasks-per-node=4 \
--mem=8G -t 00:30:00 --wait=0 --export=ALL /bin/bash</code></pre>
<p>For example we can import one of the <a href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html">Docker container by the Jupyter Project</a> that can be used to run JupyterLab on Expanse via the <a href="https://github.com/mkandes/galyleo">Galyleo script</a>:</p>
<pre><code>cd /expanse/lustre/scratch/$USER/temp_project
singularity pull docker://jupyter/scipy-notebook:latest</code></pre>
<p>This will create the Singularity container file:</p>
<pre><code>$ du -sh scipy-notebook_latest.sif
875M    scipy-notebook_latest.sif</code></pre>
<p>We can get a terminal inside the container and verify it is an Ubuntu release:</p>
<pre><code>$ singularity shell scipy-notebook_latest.sif
Singularity&gt; cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=20.04
DISTRIB_CODENAME=focal
DISTRIB_DESCRIPTION=&quot;Ubuntu 20.04.4 LTS&quot;</code></pre>
<p>Finally execute a command through the container with <code>singularity exec</code>:</p>
<pre><code>$ python --version
Python 3.6.8
$ singularity exec scipy-notebook_latest.sif python --version
Python 3.10.4</code></pre>
